---
import '../styles/header.css'
---

<header class="site-header">
  <nav>

    <a class="banner-link" href="/">
      <img
        src="/banner.webp"
        alt="Banner"
        width="230"
        height="60"
        loading="eager"
      />
    </a>

    <span class="nav-links">
      <a href="/">Home</a>

      <div class="dropdown" id="services-dropdown">
        <a href="/services" class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">Services</a>
        <div class="dropdown-content">
          <a href="/services/computer-repair">Computer Repair</a>
          <a href="/services/training">Digital Skills Training</a>
          <a href="/services/onsite-support">On-Site Support</a>
          <a href="/services/network">Network Optimization</a>
          <a href="/services/website-development">Website Development</a>
          <a href="/services/tech-consulting">Business Tech Consulting</a>
          <a href="/services/ai-automation">AI Tools & Automation</a>
          <a href="/services/custom-software">Custom Software Solutions</a>
        </div>
      </div>

      <a href="/about">About</a>
      <a href="/contact">Contact</a>
    </span>

  </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const dropdown = document.getElementById("services-dropdown");
    const toggle = dropdown?.querySelector(".dropdown-toggle");

    if (!dropdown || !toggle) return;

    // Only apply mobile behavior
    const isMobile = window.matchMedia("(max-width: 768px)").matches;

    if (isMobile) {
      let open = false;

      toggle.addEventListener("click", (e) => {
        if (!open) {
          e.preventDefault(); // block first click
          dropdown.classList.toggle("show");
          open = true;
        } else {
          // allow navigation on second click
          dropdown.classList.remove("show");
          open = false;
        }
      });

      document.addEventListener("click", (e) => {
        if (!dropdown.contains(e.target as Node)) {
          dropdown.classList.remove("show");
          open = false;
        }
      });
    }
  });
</script>
